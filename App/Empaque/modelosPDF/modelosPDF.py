from fpdf import FPDF
import base64


###DECODIFICADOR DE IMAGENES
def decode_base64_to_image(index, fecha, hora, id, base64_string):
    image_bytes = base64.b64decode(base64_string)
    nombre_imagen = "image_" + str(index) + "_" + str(fecha) + "_" + str(hora) + "_" + str(id) + ".JPEG"
    with open("App/Empaque/data/images/" + nombre_imagen, "wb") as image:
        image.write(image_bytes)
    return nombre_imagen


##CONTROL DE CAMARAS
class control_camaras_PDF(FPDF):
    def header(self):
        self.set_font('Arial', '', 15)
        self.rect(x=10,y=14,w=190,h=19)
        self.image('App/Empaque/data/images/Logo.png', x=10, y=17, w=10, h=6)
        self.text(x=21, y=22, txt= 'EMPRESA ZETONE')
        self.line(72,14,72,26)
        self.set_font('Arial', 'B', 13)
        self.text(x=74, y=22, txt= 'DEPARTAMENTO DE CALIDAD')
        self.set_font('Arial', '', 10)
        self.text(x=146, y=18, txt= 'Tipo de Documento:')
        self.set_font('Arial', 'B', 10)
        self.text(x=180, y=25, txt= 'REPORTE')
        self.line(10,26,200,26)
        self.set_font('Arial', '', 10)
        self.text(x=16, y=31, txt= 'Título de Documento:')
        self.set_font('Arial', 'B', 13)
        self.text(x=82, y=31, txt= 'CONTROL DE CÁMARAS')
        self.line(145,14,145,33)
        self.set_font('Arial', 'B', 10)
        self.text(x=146, y=32, txt= 'Código: s/n')
        self.set_font('Times', 'I', 12)
        self.text(x=146, y=40, txt= 'Establecimiento: Planta Uno')
        self.line(10,41,200,41)
        #self.set_font('Arial', 'B', 10)
        #self.line(140,39,140,44)
        #self.text(x=155, y=43, txt= 'OBSERVACIONES')
        self.ln(38)

    def footer(self):
        self.set_font('Arial', 'B', 10)
        self.set_y(-18)
        self.cell(0, 10, 'Página ' + str(self.page_no()) + '/{nb}', 0, 0, 'R')
        self.rect(x=10,y=276,w=190,h=15.5)
        self.text(x=18, y=280, txt= 'Realizó:')
        self.line(40,276,40,291)
        self.text(x=48, y=280, txt= 'Fecha:')
        self.line(70,276,70,291)
        self.text(x=100, y=280, txt= 'Revisó:')
        self.text(x=92, y=286, txt= 'Eduardo Córdoba')
        self.line(150,276,150,291)
        self.text(x=152.5, y=280, txt= 'Versión:')
        self.text(x=156.5, y=286, txt= '0.1')
        self.line(170,276,170,291)
        self.ln(250)


class Control_Cajas(FPDF):
    def header(self):
        self.set_font('Arial', '', 15)
        self.rect(x=10,y=14,w=190,h=19)
        self.image('App/Empaque/data/images/Logo.png', x=10, y=17, w=10, h=6)
        self.text(x=21, y=22, txt= 'EMPRESA ZETONE')
        self.line(72,14,72,26)
        self.set_font('Arial', 'B', 13)
        self.text(x=74, y=22, txt= 'DEPARTAMENTO DE CALIDAD')
        self.set_font('Arial', '', 10)
        self.text(x=146, y=25, txt= 'Tipo de Documento:')
        self.set_font('Arial', 'B', 10)
        self.text(x=180, y=25, txt= 'REPORTE')
        self.line(10,26,200,26)
        self.set_font('Arial', '', 10)
        self.text(x=16, y=31, txt= 'Título de Documento:')
        self.set_font('Arial', 'B', 13)
        self.text(x=82, y=31, txt= 'CONTROL DE EMPAQUE')
        self.line(145,14,145,33)
        self.set_font('Arial', 'B', 10)
        self.text(x=146, y=32, txt= 'Código: PLE25')
        self.set_font('Times', 'I', 12)
        self.text(x=146, y=39, txt= 'Establecimiento: Planta Uno')
        self.line(10,39.5,200,39.5)###RECTANGULOS
        self.rect(x=10,y=50,w=190,h=105)
        self.rect(x=10,y=44,w=190,h=5)
        self.set_font('Arial', 'B', 10)
        self.text(x=12, y=48, txt= 'Caja N°: ')
        self.text(x=44, y=48, txt= 'Bulto: ')
        self.text(x=78, y=48, txt= 'Fecha: ')
        self.text(x=112, y=48, txt= 'Hora: ')
        self.text(x=142, y=48, txt= 'Empaque: ')
        self.text(x=178, y=48, txt= 'Máquina: ')
        ## ARRIBA
        self.line(10,60,135,60)
        self.line(10,70,135,70)
        self.line(10,80,135,80)
        self.line(10,90,135,90)
        self.line(10,100,135,100)
        self.line(10,110,135,110)
        self.line(10,120,135,120)
        self.line(10,130,135,130)
        self.line(10,140,135,140)
        self.set_fill_color(186, 233, 175)
        self.rect(10.5,50.5,124,5, 'F')
        self.rect(10.5,60.5,124,5, 'F')
        self.rect(10.5,70.5,124,5, 'F')
        self.rect(10.2,80.2,124,5, 'F')
        self.rect(10.2,90.5,124,5, 'F')
        self.rect(10.2,100.5,124,5, 'F')
        self.rect(10.2,110.5,124,5, 'F')
        self.rect(10.2,120.5,124,5, 'F')
        self.rect(10.2,130.5,124,5, 'F')
        self.rect(10.2,140.5,124,5, 'F')
        self.rect(10.2,149.8,124,5, 'F')
        self.set_font('Arial', 'B', 8)
        self.text(x=14, y=54, txt= 'Variedad')
        self.text(x=50, y=54, txt= 'Envase')
        self.text(x=84, y=54, txt= 'Marca')
        self.text(x=118, y=54, txt= 'Tamaño')
        self.text(x=14, y=64, txt= 'Categoría')
        self.text(x=45, y=64, txt= 'Embalador')
        self.text(x=84, y=64, txt= 'UP')
        self.text(x=106, y=64, txt= 'F/H Embalado')
        self.text(x=24, y=74, txt= 'Lote/UMI')
        self.text(x=60, y=74, txt= '% PLU')
        self.text(x=84, y=74, txt= 'Peso Bruto')
        self.text(x=112, y=74, txt= 'Peso Neto')
        self.text(x=62, y=84, txt= 'DEFECTOS')
        ###IZQUIERDAAA
        self.text(x=14, y=88.5, txt= 'Desformadas:')
        self.text(x=14, y=94, txt= 'T. Incorrecto:')
        self.text(x=14, y=99, txt= 'Falta de Color:')
        self.text(x=14, y=104, txt= 'Russeting:')
        self.text(x=14, y=109, txt= 'Heladas:')
        self.text(x=14, y=114, txt= 'Roce Bins:')
        self.text(x=14, y=119, txt= 'Asoleado:')
        self.text(x=14, y=124, txt= 'Quemado por Sol:')
        self.text(x=14, y=129, txt= 'Fitotoxixidad:')
        self.text(x=14, y=134, txt= 'Rolado:')
        self.text(x=14, y=139, txt= 'Golpes P/M/G:')
        self.text(x=14, y=144, txt= 'Heridas P/M/G:')
        self.text(x=14, y=149, txt= 'Heridas Viejas P/M/G:')
        ### DERECHA
        self.text(x=70, y=88.5, txt= 'Cracking:')
        self.text(x=70, y=94, txt= 'Bitterpit/Corcho:')
        self.text(x=70, y=99, txt= 'Granizo:')
        self.text(x=70, y=104, txt= 'Daño por Insecto:')
        self.text(x=70, y=109, txt= 'Falta de Pedúnculo:')
        self.text(x=70, y=114, txt= 'Desvío de Clasificación:')
        self.text(x=70, y=119, txt= 'Segunda Flor:')
        self.text(x=70, y=124, txt= 'Madurez:')
        self.text(x=70, y=129, txt= 'Deshiodratación:')
        self.text(x=70, y=134, txt= 'Deacimiento Interno:')
        self.text(x=70, y=139, txt= 'C. Mohoso Hum./Seco/Ac.(L/M/S):')
        self.text(x=70, y=144, txt= 'Firmeza Pulpa Min/Prom/Max:')
        self.text(x=70, y=149, txt= 'Falta de Boro:')
        ## OBSERVACIONES
        self.text(x=14, y=153, txt= 'Obs:')

        ##DATOS CAJA PLU
        self.line(135,50,135,155)
        self.line(135,55,200,55)
        self.line(135,75,200,75)
        self.set_font('Arial', 'B', 10)
        self.text(x=156, y=54, txt= 'Imágen PLU')
        self.line(135,80,200,80)
        self.text(x=156, y=79, txt= 'Imágen Caja')
        self.line(135,170,135,275)
        self.line(135,175,200,175)
        self.line(135,195,200,195)
        self.text(x=156, y=174, txt= 'Imágen PLU')
        self.line(135,199,200,199)
        self.text(x=156, y=198, txt= 'Imágen Caja')

        self.rect(x=10,y=170,w=190,h=105)
        self.rect(x=10,y=164,w=190,h=5)
        ##ABAJO
        self.text(x=12, y=168, txt= 'Caja N°: ')
        self.text(x=44, y=168, txt= 'Bulto: ')
        self.text(x=78, y=168, txt= 'Fecha: ')
        self.text(x=112, y=168, txt= 'Hora: ')
        self.text(x=142, y=168, txt= 'Empaque: ')
        self.text(x=178, y=168, txt= 'Máquina: ')
        self.line(10,180,135,180)
        self.line(10,190,135,190)
        self.line(10,199,135,199)
        self.line(10,209,135,209)
        self.line(10,220,135,220)
        self.line(10,230,135,230)
        self.line(10,240,135,240)
        self.line(10,250,135,250)
        self.line(10,260,135,260)
        self.set_fill_color(186, 233, 175)
        self.rect(10.5,170.5,124,5, 'F')
        self.rect(10.5,180.5,124,5, 'F')
        self.rect(10.5,190.5,124,5, 'F')
        self.rect(10.2,199.5,124,5, 'F')
        self.rect(10.2,209.5,124,5, 'F')
        self.rect(10.2,220.5,124,5, 'F')
        self.rect(10.2,230.5,124,5, 'F')
        self.rect(10.2,240,124,5, 'F')
        self.rect(10.2,250.5,124,5, 'F')
        self.rect(10.2,260.5,124,5, 'F')
        self.rect(10.2,270,124,5, 'F')
        self.set_font('Arial', 'B', 8)
        self.text(x=14, y=174, txt= 'Variedad')
        self.text(x=50, y=174, txt= 'Envase')
        self.text(x=84, y=174, txt= 'Marca')
        self.text(x=118, y=174, txt= 'Tamaño')
        self.text(x=14, y=184, txt= 'Categoría')
        self.text(x=45, y=184, txt= 'Embalador')
        self.text(x=84, y=184, txt= 'UP')
        self.text(x=106, y=184, txt= 'F/H Embalado')
        self.text(x=24, y=194, txt= 'Lote/UMI')
        self.text(x=60, y=194, txt= '% PLU')
        self.text(x=84, y=194, txt= 'Peso Bruto')
        self.text(x=112, y=194, txt= 'Peso Neto')
        self.text(x=62, y=203, txt= 'DEFECTOS')
        ###IZQUIERDAAA
        self.text(x=14, y=208, txt= 'Desformadas:')
        self.text(x=14, y=213, txt= 'T. Incorrecto:')
        self.text(x=14, y=218, txt= 'Falta de Color:')
        self.text(x=14, y=223, txt= 'Russeting:')
        self.text(x=14, y=228, txt= 'Heladas:')
        self.text(x=14, y=233, txt= 'Roce Bins:')
        self.text(x=14, y=238, txt= 'Asoleado:')
        self.text(x=14, y=243, txt= 'Quemado por Sol:')
        self.text(x=14, y=248, txt= 'Fitotoxixidad:')
        self.text(x=14, y=253, txt= 'Rolado:')
        self.text(x=14, y=258, txt= 'Golpes P/M/G:')
        self.text(x=14, y=263, txt= 'Heridas P/M/G:')
        self.text(x=14, y=268, txt= 'Heridas Viejas P/M/G:')
        ### DERECHA
        self.text(x=70, y=208, txt= 'Cracking:')
        self.text(x=70, y=213, txt= 'Bitterpit/Corcho:')
        self.text(x=70, y=218, txt= 'Granizo:')
        self.text(x=70, y=223, txt= 'Daño por Insecto:')
        self.text(x=70, y=228, txt= 'Falta de Pedúnculo:')
        self.text(x=70, y=233, txt= 'Desvío de Clasificación:')
        self.text(x=70, y=238, txt= 'Segunda Flor:')
        self.text(x=70, y=243, txt= 'Madurez:')
        self.text(x=70, y=248, txt= 'Deshiodratación:')
        self.text(x=70, y=253, txt= 'Deacimiento Interno:')
        self.text(x=70, y=258, txt= 'C. Mohoso Hum./Seco/Ac.(L/M/S):')
        self.text(x=70, y=263, txt= 'Firmeza Pulpa Min/Prom/Max:')
        self.text(x=70, y=268, txt= 'Falta de Boro:')
        ## OBSERVACIONES
        self.text(x=14, y=274, txt= 'Obs:')

        self.ln(40)

    def footer(self):
        self.set_font('Arial', 'B', 10)
        self.set_y(-18)
        self.cell(0, 10, 'Página ' + str(self.page_no()) + '/{nb}', 0, 0, 'R')
        self.rect(x=10,y=278,w=190,h=15.5)
        self.text(x=18, y=282, txt= 'Realizó:')
        self.line(40,278,40,293)
        self.text(x=48, y=282, txt= 'Fecha:')
        self.line(70,278,70,293)
        self.text(x=100, y=282, txt= 'Revisó:')
        self.text(x=92, y=288, txt= 'Eduardo Córdoba')
        self.line(150,278,150,293)
        self.text(x=152.5, y=282, txt= 'Versión:')
        self.text(x=156.5, y=288, txt= '0.1')
        self.line(170,278,170,293)
        self.ln(275)

    def __init__(self):
        super().__init__()

    def draw_rect(self):
        self.set_fill_color(214, 242, 208)


